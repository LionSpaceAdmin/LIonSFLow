# LionsFlow: מפת דרכים מעודכנת לפיתוח ופריסה

## 1. חזון ומטרה

**החזון:** להפוך את LionsFlow לפלטפורמת ה-Control Plane הפנימית והמרכזית של ארגון lionsofzion-official.org. המערכת תאפשר לצוותים מורשים לבצע אוטומציה, תשאול וניהול של סביבת ה-GCP באמצעות ממשק ויזואלי בסגנון Flowise, המבוסס על תשתית מודרנית, מאובטחת וסקיילבילית של Firebase ו-Google Cloud.

**המטרה:** למנף את התשתית הקיימת (Next.js, Firebase, Genkit), לדייק את הארכיטקטורה, ולהוביל את הפרויקט משלב ה-MVP הנוכחי לפלטפורמת Production יציבה ובעלת יכולות מורחבות.

## 2. סקירת מצב קיים (Baseline Review)

בחינת קבצי הפרויקט מעלה את התמונה הבאה:

- **תשתית Frontend:** הפרויקט בנוי על Next.js 15 (App Router) עם React 19 ו-TypeScript. נעשה שימוש בספריית הקומפוננטות shadcn/ui.
- **ניהול מצב:** ניהול מצב הקנבס מתבצע באמצעות Zustand (`workflow-store.ts`).
- **Backend ו-AI:** נעשה שימוש ב-Genkit של Firebase (`@genkit-ai/next`) לניהול תהליכי AI.
- **מאגר נתונים:** Firebase Firestore נבחר כמסד הנתונים.
- **פריסה (Deployment):** הפרויקט מוגדר לפריסה באמצעות Firebase App Hosting (`apphosting.yaml`).

### יכולות ליבה וצמתים קיימים (Built-in Nodes)
בהתבסס על `node-definitions.ts`, היכולות הבאות כבר קיימות ומוכנות לשילוב בתהליכי עבודה:
- [x] **יצירת תמונה (generate-image):** יוצר תמונה מהנחיית טקסט באמצעות Imagen 2.
- [x] **תרגום טקסט (translate-text):** מתרגם טקסט בין שפות.
- [x] **ניתוח סנטימנט (analyze-sentiment):** מזהה אם טקסט הוא חיובי, שלילי או ניטרלי.
- [x] **חילוץ ישויות (extract-entities):** מוציא נתונים מובנים (שמות, מקומות) מתוך טקסט.
- [x] **צמתי GCP:** קבלת מדיניות IAM, רשימת חוקי Firewall, והפעלת/כיבוי מכונות.

## 3. מפת דרכים להמשך פיתוח

### שלב א': ביסוס וייצוב יכולות הליבה (Core Stabilization)

- [x] **הפיכת הרצת תהליכי עבודה לאמיתית (Server-Side Execution):**
    - **המימוש:** ה-Frontend קורא ל-API Route של Next.js, אשר מפעיל את ה-Genkit Flow המתאים בצד השרת. התוצאות והלוגים מוחזרים לקוח. המנוע תומך בהעברת נתונים בין צמתים.

- [x] **שמירה וטעינה מול Firestore:**
    - **המימוש:** פונקציות שומרות וטוענות את מבנה ה-ReactFlow (צמתים וחיבורים) למסמך באוסף `/workflows`.

- [x] **תצוגת לוגים:** קיים ממשק בסיסי (`logs-panel.tsx`) שמתממשק ללוגים שחוזרים מההרצה בצד השרת.

### שלב ב': אבטחה והרחבת יכולות

- [x] **מימוש הגנה באמצעות סיסמה גלובלית:**
    - [x] יצירת מסך כניסה פשוט שידרוש סיסמה המוגדרת בשרת.
    - [x] חסימת הגישה לכלל האפליקציה עד להזנת הסיסמה הנכונה.
- [x] **פיתוח צמתים לניהול GCP (Read-Only & Actions):**
    - [x] מומשו צמתים כפי שהוגדרו בחזון: `getIamPolicy`, `listFirewallRules`, `toggleVmInstance`. כל צומת מומש כחלק מ-Genkit Flow מרכזי.

### שלב ג': חווית משתמש ומוכנות לפרודקשן

- [x] **שיפור חווית המשתמש (UX):** טיפול בשגיאות, הוספת אנימציות ומשוב חזותי (כגון מחווני טעינה).
- [x] **הגדרת סביבת פריסה מלאה:** הגדרות הפריסה תומכות ב-Backend וב-API Routes.
- [ ] **ניטור, התראות ותיעוד.** (משימה עתידית, מחוץ לסקופ הנוכחי)

**הפרויקט הגיע לסיום הפיתוח הראשוני על פי מפת הדרכים.**
