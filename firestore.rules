/**
 * @file Firestore Security Rules
 * @description This ruleset is designed for a single-user application where all data is accessible without authentication.
 *
 * Core Philosophy:
 * The ruleset grants open access to all data, reflecting the application's design as a single-user system without authentication.
 *
 * Data Structure:
 * - Workflows are stored in the `/workflows` collection.
 * - Node definitions are stored in the `/node_definitions` collection.
 *
 * Key Security Decisions:
 * - No authentication is required to read or write data.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows anyone to read and write workflows.
     * @path /workflows/{workflowId}
     * @allow (get, list, create, update, delete) Any user can perform any operation.
     * @deny None. All operations are allowed.
     * @principle Open access for single-user application.
     */
    match /workflows/{workflowId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Allows anyone to read and write node definitions.
     * @path /node_definitions/{nodeDefinitionId}
     * @allow (get, list, create, update, delete) Any user can perform any operation.
     * @deny None. All operations are allowed.
     * @principle Open access for single-user application.
     */
    match /node_definitions/{nodeDefinitionId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }
  }
}