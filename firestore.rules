/**
 * @fileoverview Firestore Security Rules for Prototyping.
 *
 * Core Philosophy:
 * This ruleset is in prototyping mode. It prioritizes ease of development and rapid iteration
 * by focusing on authorization while relaxing data validation. All users have read access to all
 * data, but write access is denied.
 *
 * Data Structure:
 * - /workflows/{workflowId}: Stores workflow definitions.
 * - /node_definitions/{nodeDefinitionId}: Stores node definitions.
 *
 * Key Security Decisions:
 * - Read access is public.
 * - Write access is denied to everyone.
 * - No user-specific data or ownership checks are performed.
 *
 * Note: These rules are NOT suitable for production use. Implement proper
 * authorization and data validation before deploying to a production environment.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows public read access to workflow definitions, but denies all writes.
     * @path /workflows/{workflowId}
     * @allow (get, list): Any user can read workflows.
     * @deny (create, update, delete): No user can create, update, or delete workflows.
     * @principle Public read, no write access.
     */
    match /workflows/{workflowId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows public read access to node definitions, but denies all writes.
     * @path /node_definitions/{nodeDefinitionId}
     * @allow (get, list): Any user can read node definitions.
     * @deny (create, update, delete): No user can create, update, or delete node definitions.
     * @principle Public read, no write access.
     */
    match /node_definitions/{nodeDefinitionId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }
  }
}